<!DOCTYPE html>
<html>
<head>
    <title>Taijiang GIS Map</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        #map { height: 100vh; }
        .leaflet-control-layers { max-height: 400px; overflow-y: auto; }
    </style>
</head>
<body>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-tilelayer-wmts@latest/dist/leaflet-tilelayer-wmts.min.js"></script>
    <script src="https://unpkg.com/leaflet.gridlayer.googlemutant/leaflet.gridlayer.googlemutant.js"></script>
    <script>
        // 初始化地圖
        var map = L.map('map').setView([23.048, 120.190], 12);

        // 添加OpenStreetMap圖層
        var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // 添加Google Maps圖層
        var googleRoadmap = L.gridLayer.googleMutant({
            type: 'roadmap' // 可以是 'roadmap', 'satellite', 'terrain', 'hybrid'
        });

        var googleSatellite = L.gridLayer.googleMutant({
            type: 'satellite'
        });

        var googleHybrid = L.gridLayer.googleMutant({
            type: 'hybrid'
        });

        var googleTerrain = L.gridLayer.googleMutant({
            type: 'terrain'
        });

        // 添加NLSC WMTS圖層
        var nlscWmts = L.tileLayer.wmts('https://wmts.nlsc.gov.tw/wmts/EMAP/default/GoogleMapsCompatible/{z}/{y}/{x}', {
            tilematrixSet: 'GoogleMapsCompatible',
            format: 'image/png',
            attribution: '&copy; <a href="https://www.nlsc.gov.tw/">NLSC</a>'
        });

        // 添加其他圖層
        var satellite = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
            attribution: 'Map data: &copy; <a href="https://www.opentopomap.org/">OpenTopoMap</a> contributors'
        });

        var topo = L.tileLayer.wms('https://ahocevar.com/geoserver/wms', {
            layers: 'topp:states',
            format: 'image/png',
            transparent: true,
            attribution: '© OpenStreetMap contributors'
        });

        // 圖層控制
        var baseMaps = {
            "OpenStreetMap": osm,
            "Google Roadmap": googleRoadmap,
            "Google Satellite": googleSatellite,
            "Google Hybrid": googleHybrid,
            "Google Terrain": googleTerrain,
            "Satellite": satellite,
            "Topographic": topo
        };

        var overlayMaps = {
            "NLSC WMTS": nlscWmts
        };

        L.control.layers(baseMaps, overlayMaps).addTo(map);

        // 添加一些標記和圖形
        var marker = L.marker([23.048, 120.190]).addTo(map).bindPopup('這是台江國家公園。');
        var circle = L.circle([23.048, 120.185], { radius: 500, color: 'red', fillColor: '#f03', fillOpacity: 0.5 }).addTo(map).bindPopup('這是一個圓。');
        var polygon = L.polygon([
            [23.047, 120.187],
            [23.048, 120.190],
            [23.049, 120.189]
        ]).addTo(map).bindPopup('這是一個多邊形。');
    </script>
</body>
</html>
