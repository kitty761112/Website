<!DOCTYPE html>
<html>
<head>
    <title>GIS Website</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        #map { height: 600px; }
        #wmtsButton {
            position: absolute;
            top: 10px;
            left: 50px;
            z-index: 1000;
            background-color: white;
            padding: 10px;
            border: 2px solid #444;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="wmtsButton">顯示NLSC WMTS</div>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-tilelayer-wmts@latest/dist/leaflet-tilelayer-wmts.min.js"></script>
    <script>
        var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        });

        var map = L.map('map', {
            center: [25.0330, 121.5654],
            zoom: 13,
            layers: [osm]
        });

        var nlscWmts = L.tileLayer.wmts('https://wmts.nlsc.gov.tw/wmts/EMAP/default/GoogleMapsCompatible/{z}/{y}/{x}', {
            tilematrixSet: 'GoogleMapsCompatible',
            format: 'image/png',
            attribution: '&copy; <a href="https://www.nlsc.gov.tw/">NLSC</a>'
        });

        var marker = L.marker([25.0330, 121.5654]).bindPopup('這是台北101。');
        var circle = L.circle([25.037, 121.563], { radius: 200, color: 'red', fillColor: '#f03', fillOpacity: 0.5 }).bindPopup('我是一個圓。');
        var polygon = L.polygon([[25.033, 121.56], [25.035, 121.58], [25.032, 121.57]]).bindPopup('我是一個多邊形。');

        var overlayMaps = {
            "Marker": marker,
            "Circle": circle,
            "Polygon": polygon,
            "NLSC WMTS": nlscWmts
        };

        var baseMaps = {
            "OpenStreetMap": osm
        };

        L.control.layers(baseMaps, overlayMaps).addTo(map);

        marker.addTo(map);
        circle.addTo(map);
        polygon.addTo(map);

        document.getElementById('wmtsButton').addEventListener('click', function() {
            if (map.hasLayer(nlscWmts)) {
                map.removeLayer(nlscWmts);
                this.innerText = '顯示NLSC WMTS';
            } else {
                map.addLayer(nlscWmts);
                this.innerText = '隱藏NLSC WMTS';
            }
        });
    </script>
</body>
</html>
